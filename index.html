<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Bible podniku â€“ ukÃ¡zka</title>
  <!-- PWA: manifest + barva UI -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0a7a28">
  <!-- dÅ¯leÅ¾itÃ© pro mobily -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

<style>
  /* schovej obsah, dokud nenÃ­ ovÄ›Å™eno */
  html.auth-checking body { visibility: hidden; }
  html.auth-ok body { visibility: visible; }
</style>
<script>
  (function () {
    // 1) SEM vloÅ¾ SHA-256 hash tvÃ©ho hesla
    const PASS_HASH_HEX = "3c4ef966f728d7c0542941c369fbcdd089f8d7f7837b6d42dc2cbd6adaf68158";

    async function sha256Hex(text) {
      const enc = new TextEncoder().encode(text);
      const buf = await crypto.subtle.digest("SHA-256", enc);
      const bytes = Array.from(new Uint8Array(buf));
      return bytes.map(b => b.toString(16).padStart(2, "0")).join("");
    }

    document.documentElement.classList.add("auth-checking");
    window.addEventListener("DOMContentLoaded", async () => {
      const pwd = prompt("Zadej heslo:");
      if (pwd == null) { location.href = "about:blank"; return; }
      try {
        const hex = await sha256Hex(pwd);
        if (hex === PASS_HASH_HEX) {
          document.documentElement.classList.remove("auth-checking");
          document.documentElement.classList.add("auth-ok");
        } else {
          alert("Å patnÃ© heslo.");
          location.href = "about:blank";
        }
      } catch (e) {
        alert("Tento prohlÃ­Å¾eÄ nepodporuje potÅ™ebnÃ© Å¡ifrovacÃ­ funkce.");
        location.href = "about:blank";
      }
    });
  })();
</script>

  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }

    /* Nadpisy bez mezer */
    h2 { margin: 0; }

    /* Wrapper pro centrovÃ¡nÃ­ obrÃ¡zku */
    .floorplan-wrapper {
      display: flex;
      justify-content: center;
      margin-bottom: 10px;
    }

    /* Kontejner pÅ¯dorysu */
    .floorplan {
      position: relative;
      width: 4000px;       /* âœ… jednotky doplnÄ›ny */
      max-width: 500%;
      container-type: inline-size; /* pro pÅ™Ã­padnÃ© budoucÃ­ container-queries */
    }

    .floorplan img {
      width: 100%;
      height: auto;
      display: block;
      margin: 0;
      padding: 0;
      pointer-events: none;  /* obrÃ¡zek nebude blokovat kliky */
    }

    /* âœ… zÃ¡kladnÃ­ velikost ikon (desktop/tablet) */
    .icon {
      position: absolute;
      width: 18px;
      height: 18px;
      line-height: 18px;     /* zarovnÃ¡nÃ­ textu na stÅ™ed */
      border-radius: 50%;
      background-color: rgb(0, 14, 124);
      color: white;
      text-align: center;
      cursor: pointer;
      z-index: 3;
      font-size: 10px;       /* ~55â€“60 % z prÅ¯mÄ›ru */
    }

    /* âœ… tvrdÃ© zmenÅ¡enÃ­ na mobilech (~30 % pÅ¯vodnÃ­ velikosti) */
    @media (max-width: 600px), (pointer: coarse) {
      .icon {
        width: 6px !important;
        height: 6px !important;
        line-height: 6px !important;
        font-size: 4px !important;
      }
    }
    @media (max-width: 360px) {
      .icon {
        width: 5px !important;
        height: 5px !important;
        line-height: 5px !important;
        font-size: 3.5px !important;
      }
    }

    /* ---- barvy podle typu ---- */
    .icon-gold   { background-color: rgb(67, 57, 1); color: black; }  /* svÄ›tla */
    .icon-blue   { background-color: deepskyblue; }                    /* klima, chlaÄÃ¡ky, led */
    .icon-gray   { background-color: rgb(65, 67, 67); }                /* zÃ¡suvky, kompresor */
    .icon-red    { background-color: rgb(255, 0, 0); }                 /* reprÃ¡ky, alarmy */
    .icon-green  { background-color: rgb(0, 98, 23); }                 /* vypÃ­naÄe, pokladna */
    .icon-pink   { background-color: rgb(150, 1, 120); }               /* kamera */
    .icon-orange { background-color: rgb(244, 118, 0); }               /* topenÃ­, vÃ½Äep */
    .icon-brown  { background-color: rgb(92, 44, 0); }                 /* kÃ¡vovar */
    /* -------------------------------- */

    /* âœ… MINI POPUP â€“ cca 5Ã— menÅ¡Ã­ pomocÃ­ scale */
    .popup {
      display: none;
      position: fixed;
      background: #fff;
      border: 2px solid #333;
      padding: 12px;
      z-index: 10000;
      box-shadow: 0 12px 28px rgba(0,0,0,.25);
      max-width: min(320px, 86vw);
      max-height: min(65vh, 520px);
      overflow: auto;
      border-radius: 12px;
      font-size: 14px;      /* zÃ¡klad â€“ zmenÅ¡Ã­ se transformem */
      line-height: 1.35;

      /* ğŸ‘‡ klÃ­Ä k â€5Ã— menÅ¡Ã­muâ€œ */
      --popup-scale: 0.4;          /* 0.2 = 20 % velikosti (â‰ˆ 5Ã— menÅ¡Ã­) */
      transform-origin: top left;  /* polohujeme od levÃ©ho hornÃ­ho rohu */
      transform: scale(var(--popup-scale));
    }
    .popup h2 { font-size: 16px; margin: 0 0 6px; }
    .popup p  { margin: 0; }
    .popup img { max-width: 100%; height: auto; display: block; }

    @supports (padding: max(0px)) {
      .popup {
        padding-left:  max(12px, env(safe-area-inset-left));
        padding-right: max(12px, env(safe-area-inset-right));
        padding-top:   max(12px, env(safe-area-inset-top));
        padding-bottom:max(12px, env(safe-area-inset-bottom));
      }
    }

    .popup button { margin-top: 10px; padding: 5px 10px; }

    .overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 9999;
    }

    /* ====== ZNAÄŒKOVACÃ MÃ“D â€“ styly ====== */
    .marker-panel {
      position: fixed;
      right: 16px;
      bottom: 64px;
      background: #fff;
      border: 1px solid #ccc;
      padding: 10px 12px;
      border-radius: 8px;
      box-shadow: 0 2px 12px rgba(0,0,0,.15);
      z-index: 9999;
      text-align: left;
      font-size: 14px;
      display: none;
    }
    .marker-panel label { display: block; margin-bottom: 6px; }
    .marker-panel small { color: #666; }

    .marker-ghost {
      position: absolute;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      pointer-events: none;
      transform: translate(-50%, -50%);
      border: 2px dashed #333;
      background: rgba(255,255,255,.5);
      z-index: 4;
    }

    .copy-toast {
      position: fixed;
      left: 50%;
      bottom: 120px;
      transform: translateX(-50%);
      background: #333;
      color: #fff;
      padding: 6px 10px;
      border-radius: 6px;
      font-size: 13px;
      opacity: 0;
      transition: opacity .2s;
      z-index: 10000;
    }
    .copy-toast.show { opacity: 1; }

    .marker-toggle {
      position: fixed;
      right: 16px;
      bottom: 16px;
      z-index: 10000;
      background: #333;
      color: #fff;
      border: none;
      border-radius: 999px;
      padding: 8px 12px;
      cursor: pointer;
      box-shadow: 0 2px 10px rgba(0,0,0,.2);
    }
    .marker-toggle.on { background: #0a7a28; }
    /* ====== /ZNAÄŒKOVACÃ MÃ“D ====== */
  </style>
</head>
<body>
  <h1>Golden Kettle Irish Pub â€“ Elektroinstalace</h1>

  <!-- 1) vchod -->
  <div class="floorplan-wrapper">
    <div class="floorplan">
      <img src="1vchod.png" alt="PÅ¯dorys â€“ Prostor 1">
      <!-- Ikonky v procentech -->
      <div class="icon icon-green" style="top: 58%; left: 49.5%;" onclick="openPopup('VypÃ­naÄ Vchod','VÃ½Å¡ka: 80 cm<br>Aktivuje: AutomatickÃ© dveÅ™e', this)">V</div>
      <div class="icon" style="top: 55.1%; left: 54.7%;" onclick="openPopup('AutomatickÃ© dveÅ™e','Je aktivovÃ¡n s: VypÃ­naÄ Vchod', this)">D</div>
      <div class="icon icon-blue" style="top: 60%; left: 54.7%;" onclick="openPopup('Klimatizace Vchod','VÃ½Å¡ka: 220 cm', this)">â„ï¸</div>
      <div class="icon icon-gold" style="top: 71%; left: 53.5%;" onclick="openPopup('Å½Ã¡rovka Vchod1; Typ 4','VÃ½Å¡ka: 240 cm<br><br>ZnaÄka: EMOS<br>PÅ™Ã­kon: 2.2 W<br>NapÄ›tÃ­: 230 V<br>Proud: 25 mA<br>Tvar: svÃ­ÄkovÃ¡', this)">ğŸ’¡</div>
      <div class="icon icon-gold" style="top: 70.5%; left: 50%;" onclick="openPopup('Å½Ã¡rovka Vchod2; Typ 4','VÃ½Å¡ka: 240 cm<br><br>ZnaÄka: EMOS<br>PÅ™Ã­kon: 2.2 W<br>NapÄ›tÃ­: 230 V<br>Proud: 25 mA<br>Tvar: svÃ­ÄkovÃ¡', this)">ğŸ’¡</div>
    </div>
  </div>

  <!-- 2) VIP -->
  <div class="floorplan-wrapper">
    <div class="floorplan">
      <img src="3VIP.png" alt="PÅ¯dorys mÃ­stnosti">
      <!-- Ikonky v procentech -->
      <div class="icon icon-gray" style="top: 35%; left: 35%;" onclick="openPopup('ZÃ¡suvka VIP','VÃ½Å¡ka: 5 cm', this)">Z</div>
      <div class="icon icon-red"  style="top: 28%; left: 36%;" onclick="openPopup('Reproduktor VIP','VÃ½Å¡ka: 140 cm', this)">â™«</div>
      <div class="icon icon-red"  style="top: 32.5%; left: 59%;" onclick="openPopup('Reproduktor VIP','VÃ½Å¡ka: 140 cm', this)">â™«</div>
      <div class="icon icon-green" style="top: 72%; left: 34%;" onclick="openPopup('VypÃ­naÄ VIP','VÃ½Å¡ka: 50 cm<br>Aktivuje: Å½Ã¡rovka VIP4', this)">V</div>
      <div class="icon icon-green" style="top: 68%; left: 52%;" onclick="openPopup('VypÃ­naÄ VIP 2','VÃ½Å¡ka: 150 cm<br>Aktivuje: DekorativnÃ­ osvÄ›tlenÃ­ obrazu VIP', this)">V</div>
      <div class="icon icon-gold"  style="top: 29%; left: 40%;" onclick="openPopup('Å½Ã¡rovka VIP1; Typ 4','VÃ½Å¡ka: 150 cm<br><br>ZnaÄka: EMOS<br>PÅ™Ã­kon: 2.2 W<br>NapÄ›tÃ­: 230 V<br>Proud: 25 mA<br>Tvar: svÃ­ÄkovÃ¡', this)">ğŸ’¡</div>
      <div class="icon icon-gold"  style="top: 32%; left: 55%;" onclick="openPopup('Å½Ã¡rovka VIP2; Typ 4','VÃ½Å¡ka: 150 cm<br><br>ZnaÄka: EMOS<br>PÅ™Ã­kon: 2.2 W<br>NapÄ›tÃ­: 230 V<br>Proud: 25 mA<br>Tvar: svÃ­ÄkovÃ¡', this)">ğŸ’¡</div>
      <div class="icon icon-gold"  style="top: 70%; left: 36%;" onclick="openPopup('Å½Ã¡rovka VIP3; Typ 4','VÃ½Å¡ka: 300 cm<br><br>ZnaÄka: EMOS<br>PÅ™Ã­kon: 2.2 W<br>NapÄ›tÃ­: 230 V<br>Proud: 25 mA<br>Tvar: svÃ­ÄkovÃ¡', this)">ğŸ’¡</div>
      <div class="icon icon-gold"  style="top: 58%; left: 28%;" onclick="openPopup('Å½Ã¡rovka VIP4; Typ 4','VÃ½Å¡ka: 300 cm<br><br>ZnaÄka: EMOS<br>PÅ™Ã­kon: 2.2 W<br>NapÄ›tÃ­: 230 V<br>Proud: 25 mA<br>Tvar: svÃ­ÄkovÃ¡<br><br>Je aktivovÃ¡na s: VypÃ­naÄ VIP', this)">ğŸ’¡</div>
      <div class="icon icon-gold"  style="top: 63.5%; left: 53%;" onclick="openPopup('Å½Ã¡rovka VIP5; Typ 6','VÃ½Å¡ka: 250 cm<br><br>ZnaÄka: V-TAC<br>PÅ™Ã­kon: 10 W<br>NapÄ›tÃ­: 220-240 V<br>Proud: 45 mA', this)">ğŸ’¡</div>
      <div class="icon icon-gold"  style="top: 68%; left: 54%;" onclick="openPopup('DekorativnÃ­ osvÄ›tlenÃ­ obrazu VIP; Typ LED','VÃ½Å¡ka: xxx cm', this)">ğŸ’¡</div>
      <div class="icon"           style="top: 73%; left: 38%;" onclick="openPopup('Zvonek VIP','VÃ½Å¡ka: 230 cm', this)">zv</div>
      <div class="icon icon-pink" style="top: 73%; left: 40%;" onclick="openPopup('Kamera VIP','VÃ½Å¡ka: 260 cm', this)">ğŸ“·</div>
    </div>
  </div>

  <!-- 2) TankÃ¡rna -->
  <div class="floorplan-wrapper">
    <div class="floorplan">
      <img src="2VIP.png" alt="PÅ¯dorys â€“ NovÃ¡ mÃ­stnost">
      <!-- Ikonky v procentech -->
      <div class="icon icon-blue" style="top: 38%; left: 53.5%;" onclick="openPopup('Klimatizace TankÃ¡rna','VÃ½Å¡ka: 180 cm', this)">â„ï¸</div>
      <div class="icon"           style="top: 38%; left: 58%;"   onclick="openPopup('PrÅ¯tokovÃ½ mÄ›Å™iÄ TankÃ¡rna','VÃ½Å¡ka: 160 cm', this)">PM</div>
      <div class="icon icon-green"style="top: 42.8%; left: 55%;" onclick="openPopup('VypÃ­naÄ TankÃ¡rna','VÃ½Å¡ka: 160 cm<br>Aktivuje: Å½Ã¡rovka VIP4', this)">V</div>
      <div class="icon icon-gray" style="top: 43%; left: 58%;"   onclick="openPopup('ZÃ¡suvka TankÃ¡rna','VÃ½Å¡ka: 160 cm', this)">Z</div>
      <div class="icon"           style="top: 30%; left: 50%;"   onclick="openPopup('3x VÃ½ÄepnÃ­ zaÅ™Ã­zenÃ­ TankÃ¡rna','VÃ½Å¡ka: 160 cm', this)">VZ</div>
      <div class="icon"           style="top: 35%; left: 40%;"   onclick="openPopup('6x VÃ½ÄepnÃ­ tank TankÃ¡rna','', this)">ğŸ»</div>
    </div>
  </div>

  <!-- 4) stÅ™ed -->
  <div class="floorplan-wrapper">
    <div class="floorplan">
      <img src="4stred.png" alt="PÅ¯dorys â€“ Prostor 3">
      <!-- Ikonky v procentech -->
      <div class="icon icon-gray"  style="top: 35%; left: 42%;"   onclick="openPopup('ZÃ¡suvka, stÅ™ednÃ­ bar1','PoÄet portÅ¯: x', this)">Z</div>
      <div class="icon icon-gray"  style="top: 50%; left: 63.5%;" onclick="openPopup('ZÃ¡suvka, stÅ™ednÃ­ bar2','PoÄet portÅ¯: x', this)">Z</div>
      <div class="icon icon-red"   style="top: 80%; left: 40%;"   onclick="openPopup('Reproduktor, stÅ™ednÃ­ bar1','', this)">â™«</div>
      <div class="icon icon-red"   style="top: 70%; left: 40.5%;" onclick="openPopup('Reproduktor, stÅ™ednÃ­ bar2','', this)">â™«</div>
      <div class="icon icon-red"   style="top: 39%; left: 40.5%;" onclick="openPopup('Reproduktor, stÅ™ednÃ­ bar3','', this)">â™«</div>
      <div class="icon icon-blue"  style="top: 26%; left: 42%;"   onclick="openPopup('Lednice, stÅ™ednÃ­ bar1','', this)">L</div>
      <div class="icon icon-blue"  style="top: 62%; left: 37%;"   onclick="openPopup('Lednice, stÅ™ednÃ­ bar2','', this)">L</div>
      <div class="icon icon-blue"  style="top: 61%; left: 31%;"   onclick="openPopup('Lednice, stÅ™ednÃ­ bar3','', this)">L</div>
      <div class="icon icon-blue"  style="top: 50%; left: 31%;"   onclick="openPopup('Lednice, stÅ™ednÃ­ bar4','', this)">L</div>
      <div class="icon icon-gray"  style="top: 45%; left: 31%;"   onclick="openPopup('Kompresor, stÅ™ednÃ­ bar1','', this)">ğŸ—œ</div>
      <div class="icon icon-gray"  style="top: 48%; left: 37%;"   onclick="openPopup('Kompresor, stÅ™ednÃ­ bar2','', this)">ğŸ—œ</div>
      <div class="icon icon-green" style="top: 83.8%; left: 39%;" onclick="openPopup('VypÃ­naÄ, stÅ™ednÃ­ bar1','', this)">V</div>
      <div class="icon icon-green" style="top: 41%; left: 31%;"   onclick="openPopup('VypÃ­naÄ, stÅ™ednÃ­ bar2','', this)">V</div>
      <div class="icon"            style="top: 79%; left: 30.5%;" onclick="openPopup('Umyvadlo, stÅ™ednÃ­ bar1','', this)">ğŸ’§</div>
      <div class="icon"            style="top: 52%; left: 37%;"   onclick="openPopup('Umyvadlo, stÅ™ednÃ­ bar2','', this)">ğŸ’§</div>
      <div class="icon icon-pink"  style="top: 29%; left: 31%;"   onclick="openPopup('Kamera, stÅ™ednÃ­ bar','', this)">ğŸ“·</div>
      <div class="icon"            style="top: 82%; left: 55%;"   onclick="openPopup('Televize, stÅ™ednÃ­ bar','', this)">Tv</div>
      <div class="icon icon-gray"  style="top: 35%; left: 63.5%;" onclick="openPopup('TopenÃ­, stÅ™ednÃ­ bar','', this)">â™¨ï¸</div>
      <div class="icon icon-gray"  style="top: 50%; left: 50%;"   onclick="openPopup('Detektor kouÅ™e, stÅ™ednÃ­ bar','', this)">ğŸ”¥</div>
      <div class="icon icon-blue"  style="top: 65%; left: 63%;"   onclick="openPopup('Klimatizace, stÅ™ednÃ­ bar','', this)">â„ï¸</div>
      <div class="icon"            style="top: 70%; left: 30.8%;" onclick="openPopup('MyÄka nÃ¡dobÃ­, stÅ™ednÃ­ bar','', this)">M</div>
      <div class="icon icon-green" style="top: 35%; left: 37.2%;" onclick="openPopup('Pokladna, stÅ™ednÃ­ bar','', this)">$</div>
      <div class="icon icon-gray"  style="top: 67.7%; left: 37%;" onclick="openPopup('LedovaÄ, stÅ™ednÃ­ bar','', this)">ğŸ§Š</div>
      <div class="icon icon-brown" style="top: 33.8%; left: 31.1%;" onclick="openPopup('KÃ¡vovar,  stÅ™ednÃ­ bar','VÃ½Å¡ka: â€¦ cm', this)">â˜•ï¸</div>
      <div class="icon"            style="top: 57.1%; left: 37%;" onclick="openPopup('PostMix,  stÅ™ednÃ­ bar','VÃ½Å¡ka: â€¦ cm', this)">PM</div>
      <div class="icon icon-orange" style="top: 41.6%; left: 37.1%;" onclick="openPopup('VÃ½Äep, stÅ™ednÃ­ bar','VÃ½Å¡ka: â€¦ cm', this)">ğŸº</div>
      <div class="icon icon-gold"  style="top: 41.9%; left: 63.5%;" onclick="openPopup('SvÄ›tlo, stÅ™ednÃ­ bar2; Typ 4','VÃ½Å¡ka: 190 cm<br><br>ZnaÄka: EMOS<br>PÅ™Ã­kon: 2.2 W<br>NapÄ›tÃ­: 230 V<br>Proud: 25 mA<br>Tvar: svÃ­ÄkovÃ¡', this)">ğŸ’¡</div>
      <div class="icon icon-gold"  style="top: 81.1%; left: 62.4%;" onclick="openPopup('SvÄ›tlo, stÅ™ednÃ­ bar1; Typ 4','VÃ½Å¡ka: 190 cm<br><br>ZnaÄka: EMOS<br>PÅ™Ã­kon: 2.2 W<br>NapÄ›tÃ­: 230 V<br>Proud: 25 mA<br>Tvar: svÃ­ÄkovÃ¡', this)">ğŸ’¡</div>
    </div>
  </div>

  <!-- 5) wc -->
  <div class="floorplan-wrapper">
    <div class="floorplan">
      <img src="5wc.png" alt="PÅ¯dorys â€“ Prostor 4">
      <!-- Ikonky v procentech zÃ¡chody -->
      <div class="icon icon-gray" style="top: 33.6%; left: 56.2%;" onclick="openPopup('ZÃ¡chod WC1','VÃ½Å¡ka: â€¦ cm', this)">ğŸš½</div>
      <div class="icon" style="top: 34.3%; left: 52.4%;" onclick="openPopup('Umyvadlo WC1','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’§</div>
      <div class="icon icon-gold" style="top: 37.2%; left: 55.6%;" onclick="openPopup('SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-green" style="top: 40.1%; left: 52.1%;" onclick="openPopup('VypÃ­naÄ â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">V</div>
      <div class="icon" style="top: 32.9%; left: 59.4%;" onclick="openPopup('sprcha â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸš¿</div>
      <div class="icon icon-gray" style="top: 33.1%; left: 63.7%;" onclick="openPopup('ZÃ¡chod WC2','VÃ½Å¡ka: â€¦ cm', this)">ğŸš½</div>
      <div class="icon icon-gray" style="top: 32.4%; left: 67.4%;" onclick="openPopup('ZÃ¡chod WC3','VÃ½Å¡ka: â€¦ cm', this)">ğŸš½</div>
      <div class="icon icon-gold" style="top: 37.2%; left: 64.0%;" onclick="openPopup('2x SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gold" style="top: 36.8%; left: 67.8%;" onclick="openPopup('2x SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gold" style="top: 46.5%; left: 60.9%;" onclick="openPopup('2x SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gold" style="top: 45.6%; left: 66.2%;" onclick="openPopup('2x SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gray" style="top: 49.1%; left: 63.4%;" onclick="openPopup('2x ZÃ¡chod WC4,5','VÃ½Å¡ka: â€¦ cm', this)">ğŸš½</div>
      <div class="icon icon-gray" style="top: 47.9%; left: 68.0%;" onclick="openPopup('2x ZÃ¡chod WC6,7','VÃ½Å¡ka: â€¦ cm', this)">ğŸš½</div>
      <div class="icon icon-gold" style="top: 45.1%; left: 53.7%;" onclick="openPopup('2x SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gray" style="top: 47.3%; left: 56.3%;" onclick="openPopup('ZÃ¡suvka â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">Z</div>
      <div class="icon" style="top: 48.6%; left: 52.7%;" onclick="openPopup('Umyvadlo WC2','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’§</div>
      <div class="icon icon-gold" style="top: 54.9%; left: 53.7%;" onclick="openPopup('2x SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gold" style="top: 58.8%; left: 61.1%;" onclick="openPopup('4x SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gray" style="top: 63.9%; left: 62.1%;" onclick="openPopup('ZÃ¡suvka â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">Z</div>
      <div class="icon" style="top: 62.1%; left: 58.6%;" onclick="openPopup('Umyvadlo WC3','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’§</div>
      <div class="icon" style="top: 64.1%; left: 60.2%;" onclick="openPopup('susak â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">S</div>
      <div class="icon icon-gold" style="top: 54.4%; left: 66.6%;" onclick="openPopup('2x SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gold" style="top: 61.2%; left: 66.7%;" onclick="openPopup('2x SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gray" style="top: 54.3%; left: 68.7%;" onclick="openPopup('ZÃ¡chod WC8','VÃ½Å¡ka: â€¦ cm', this)">ğŸš½</div>
      <div class="icon icon-gray" style="top: 60.7%; left: 68.6%;" onclick="openPopup('ZÃ¡chod WC9','VÃ½Å¡ka: â€¦ cm', this)">ğŸš½</div>
      <div class="icon icon-gold" style="top: 64.6%; left: 54.5%;" onclick="openPopup('SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-green" style="top: 61.0%; left: 55.2%;" onclick="openPopup('VypÃ­naÄ â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">V</div>
      <!-- Ikonky v procentech stÅ™ed -->
      <div class="icon icon-green" style="top: 66.8%; left: 51.9%;" onclick="openPopup('VypÃ­naÄ â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">V</div>
      <div class="icon icon-red" style="top: 59.9%; left: 51.3%;" onclick="openPopup('Reproduktor â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">â™«</div>
      <div class="icon icon-pink" style="top: 58.0%; left: 51.6%;" onclick="openPopup('Kamera â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ“·</div>
      <div class="icon icon-gold" style="top: 51.1%; left: 41.2%;" onclick="openPopup('Lustr, 4 Å½Ã¡rovky â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-red" style="top: 35.1%; left: 49.8%;" onclick="openPopup('Reproduktor â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">â™«</div>
      <div class="icon icon-gold" style="top: 35.9%; left: 45.9%;" onclick="openPopup('vytrÃ½na â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gold" style="top: 67.2%; left: 48.4%;" onclick="openPopup('VytrÃ½na â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gold" style="top: 66.3%; left: 46.7%;" onclick="openPopup('SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gold" style="top: 67.8%; left: 45.4%;" onclick="openPopup('VytrÃ½na â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-blue" style="top: 60.9%; left: 31.9%;" onclick="openPopup('Klimatizace â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">K</div>
      <div class="icon" style="top: 44.8%; left: 33.0%;" onclick="openPopup('topeni â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">â™¨ï¸</div>
      <div class="icon" style="top: 48.2%; left: 32.7%;" onclick="openPopup('tv â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">Tv</div>
      <div class="icon icon-gold" style="top: 51.5%; left: 32.7%;" onclick="openPopup('SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gray" style="top: 55.0%; left: 32.2%;" onclick="openPopup('ZÃ¡suvka â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">Z</div>





      <!-- OPRAVA: bez backtickÅ¯, bezpeÄnÃ© uvozovky -->
      <div class="icon icon-red" style="top: 61.2%; left: 53.1%;"
           onclick="openPopup('RozvadeÄ WC', '<img src=&quot;rozvadecwc.png&quot; alt=&quot;RozvadÄ›Ä 3 - WC&quot; style=&quot;max-width:100%; height:auto;&quot;>', this)">âš¡ï¸</div>
    </div>
  </div>

  <!-- 6 schody gt -->
  <div class="floorplan-wrapper">
    <div class="floorplan">
      <img src="6schodygt.png" alt="PÅ¯dorys â€“ Prostor 5">
      <!-- Ikonky v procentech -->
       <div class="icon icon-gray" style="top: 54.6%; left: 36.2%;" onclick="openPopup('Boiler â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">â™¨ï¸</div>
       <div class="icon" style="top: 73.9%; left: 40.7%;" onclick="openPopup('PostMix â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">PM</div>
       <div class="icon icon-red" style="top: 76.7%; left: 45.9%;"
           onclick="openPopup('RozvadeÄ Schody na GT', '<img src=&quot;rozvadecschody.png&quot; alt=&quot;RozvadÄ›Ä 3 - WC&quot; style=&quot;max-width:100%; height:auto;&quot;>', this)">âš¡ï¸</div>
      <div class="icon icon-gold" style="top: 64.7%; left: 43.7%;" onclick="openPopup('SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gold" style="top: 77.1%; left: 54.6%;" onclick="openPopup('SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ğŸ’¡</div>
      <div class="icon icon-gray" style="top: 39.6%; left: 59.2%;" onclick="openPopup('ZÃ¡suvka â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">Z</div>
      <div class="icon" style="top: 42.0%; left: 55.5%;" onclick="openPopup('Servery â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">S</div>
      <div class="icon" style="top: 59.8%; left: 58.1%;" onclick="openPopup('VÃ½ÄepnÃ­ zaÅ™Ã­zenÃ­ (PÃ­pa) â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">VZ</div>
    </div>
  </div>

  <!-- 7gt -->
  <div class="floorplan-wrapper">
    <div class="floorplan">
      <img src="7gt.png" alt="PÅ¯dorys â€“ Prostor 6">
      <!-- Ikonky v procentech -->
       <div class="icon icon-red" style="top: 25.4%; left: 52.1%;" onclick="openPopup('Reproduktor â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">R</div>
       <div class="icon icon-blue" style="top: 29.7%; left: 50.9%;" onclick="openPopup('Lednice â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">L</div>
       <div class="icon" style="top: 29.2%; left: 52.4%;" onclick="openPopup('Kompresor â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">K</div>
       <div class="icon" style="top: 28.6%; left: 46.7%;" onclick="openPopup('Televize â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">Tv</div>
       <div class="icon icon-brown" style="top: 30.6%; left: 45.7%;" onclick="openPopup('KÃ¡vovar â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">KÃ¡v</div>
       <div class="icon icon-green" style="top: 48.4%; left: 50.0%;" onclick="openPopup('Pokladna â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">V</div>
       <div class="icon icon-gray" style="top: 42.6%; left: 47.9%;" onclick="openPopup('ZÃ¡suvka â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">Z</div>
       <div class="icon icon-blue" style="top: 44.9%; left: 48.6%;" onclick="openPopup('LedovaÄ â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">ice</div>
       <div class="icon" style="top: 43.0%; left: 51.9%;" onclick="openPopup('Kompresor â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">K</div>
       <div class="icon" style="top: 41.2%; left: 54.9%;" onclick="openPopup('UzÃ¡vÄ›r â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">U</div>
       <div class="icon" style="top: 44.8%; left: 55.4%;" onclick="openPopup('Umyvadlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">U</div>
       <div class="icon icon-gold" style="top: 46.5%; left: 53.1%;" onclick="openPopup('VÃ½Äep â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">V</div>
       <div class="icon icon-red" style="top: 67.1%; left: 60.8%;"
        onclick="openPopup('RozvadeÄ GT', '<img src=&quot;rozvadecgt.png&quot; alt=&quot;RozvadÄ›Ä 3 - WC&quot; style=&quot;max-width:100%; height:auto;&quot;>', this)">âš¡ï¸</div>
       <div class="icon icon-gray" style="top: 74.5%; left: 56.7%;" onclick="openPopup('ZÃ¡suvka â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">Z</div>
       <div class="icon icon-gray" style="top: 86.7%; left: 50.6%;" onclick="openPopup('ZÃ¡suvka â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">Z</div>
       <div class="icon icon-gray" style="top: 69.1%; left: 41.1%;" onclick="openPopup('TopenÃ­ â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">â™¨ï¸</div>
       <div class="icon icon-gray" style="top: 58.5%; left: 39.9%;" onclick="openPopup('TopenÃ­ â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">â™¨ï¸</div>
       <div class="icon icon-blue" style="top: 78.2%; left: 51.7%;" onclick="openPopup('Klimatizace â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">K</div>
       <div class="icon icon-gray" style="top: 61.9%; left: 49.7%;" onclick="openPopup('Detektor kouÅ™e â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">DK</div>
       <div class="icon icon-red" style="top: 71.5%; left: 61.4%;" onclick="openPopup('Reproduktor â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">R</div>
       <div class="icon icon-gold" style="top: 34.4%; left: 40.0%;" onclick="openPopup('SvÄ›tlo â€“ doplÅˆ popis','VÃ½Å¡ka: â€¦ cm', this)">L4</div>







    </div>
  </div>

  <!-- 8 dolni bar -->
  <div class="floorplan-wrapper">
    <div class="floorplan">
      <img src="8dolni.png" alt="PÅ¯dorys â€“ Prostor 7">
      <!-- Ikonky v procentech -->
    </div>
  </div>

  <!-- 9 velky sal -->
  <div class="floorplan-wrapper">
    <div class="floorplan">
      <img src="9velky.png" alt="PÅ¯dorys â€“ Prostor 8">
      <!-- Ikonky v procentech -->
    </div>
  </div>

  <!-- 10 pasaz -->
  <div class="floorplan-wrapper">
    <div class="floorplan">
      <img src="10pasaz.png" alt="PÅ¯dorys â€“ Prostor 9">
      <!-- Ikonky v procentech -->
    </div>
  </div>

  <!-- 11 maly sal -->
  <div class="floorplan-wrapper">
    <div class="floorplan">
      <img src="11maly.png" alt="PÅ¯dorys â€“ Prostor 10">
      <!-- Ikonky v procentech -->
    </div>
  </div>

  <!-- 12 mycka -->
  <div class="floorplan-wrapper">
    <div class="floorplan">
      <img src="12mycka.png" alt="PÅ¯dorys â€“ Prostor 11">
      <!-- Ikonky v procentech -->
    </div>
  </div>

  <!-- 13 kuchyn -->
  <div class="floorplan-wrapper">
    <div class="floorplan">
      <img src="13kuchyn.png" alt="PÅ¯dorys â€“ Prostor 12">
      <!-- Ikonky v procentech -->
    </div>
  </div>

  <!-- Popup a overlay -->
  <div class="overlay" id="overlay" onclick="closePopup()"></div>
  <div class="popup" id="popup">
    <h2 id="popupTitle"></h2>
    <p id="popupContent"></p>
    <button onclick="closePopup()">ZavÅ™Ã­t</button>
  </div>

  <script>
    function getPopupScale(el) {
      const cs = window.getComputedStyle(el);
      const raw = (cs.getPropertyValue('--popup-scale') || '1').trim();
      const s = parseFloat(raw);
      return (!isNaN(s) && s > 0) ? s : 1;
    }

    /* vÃ½poÄet polohy popupu podle ikonky + â€clampingâ€œ do obrazovky (se scale) */
    function positionPopup(popupEl, anchorX, anchorY) {
      const GAP = 12;        // mezera mezi ikonou a popupem
      const PADDING = 8;     // odstup od okrajÅ¯ obrazovky

      // zobrazÃ­me "neviditelnÄ›", abychom zmÄ›Å™ili velikost
      popupEl.style.visibility = 'hidden';
      popupEl.style.display = 'block';

      const scale = getPopupScale(popupEl);
      const pw = popupEl.offsetWidth * scale;   // Å¡Ã­Å™ka po transformaci
      const ph = popupEl.offsetHeight * scale;  // vÃ½Å¡ka po transformaci
      const vw = window.innerWidth;
      const vh = window.innerHeight;

      // vÃ½chozÃ­ poloha: nad ikonou a horizontÃ¡lnÄ› vystÅ™edÄ›nÃ¡
      let left = Math.round(anchorX - pw / 2);
      let top  = Math.round(anchorY - ph - GAP);

      // kdyÅ¾ nahoÅ™e nenÃ­ mÃ­sto, umÃ­sti pod ikonu
      if (top < PADDING) {
        top = Math.round(anchorY + GAP);
      }

      // omez do viditelnÃ© oblasti (viewportu)
      left = Math.max(PADDING, Math.min(left, vw - pw - PADDING));
      top  = Math.max(PADDING, Math.min(top, vh - ph - PADDING));

      popupEl.style.left = left + 'px';
      popupEl.style.top  = top + 'px';
      popupEl.style.visibility = 'visible';
    }

    function openPopup(title, content, el) {
      const popup = document.getElementById('popup');
      const overlay = document.getElementById('overlay');
      const titleEl = document.getElementById('popupTitle');
      const contentEl = document.getElementById('popupContent');

      titleEl.innerHTML = title;
      contentEl.innerHTML = content;

      // pÅ™evzÃ­t barvu ikonky (background-color)
      let color = '#333';
      if (el) {
        const cs = window.getComputedStyle(el);
        color = cs.backgroundColor || color;
      }

      popup.style.borderColor = color;
      popup.style.boxShadow = `0 0 12px 0 ${color}`;
      titleEl.style.color = color;

      overlay.style.display = 'block';
      popup.style.display = 'block';

      // spoÄÃ­tat polohu podle skuteÄnÃ© pozice ikonky na obrazovce
      const r = el ? el.getBoundingClientRect() : { left: window.innerWidth/2, top: window.innerHeight/2, width: 0, height: 0 };
      const anchorX = r.left + r.width / 2;
      const anchorY = r.top + r.height / 2;

      positionPopup(popup, anchorX, anchorY);

      // uloÅ¾ anchor pro pÅ™epoÄty pÅ™i zmÄ›nÄ› velikosti/otoÄenÃ­
      popup.dataset.anchorX = String(anchorX);
      popup.dataset.anchorY = String(anchorY);
    }

    function closePopup() {
      document.getElementById('overlay').style.display = 'none';
      const popup = document.getElementById('popup');
      popup.style.display = 'none';
      delete popup.dataset.anchorX;
      delete popup.dataset.anchorY;
    }

    // pÅ™epoÄet pÅ™i otoÄenÃ­/resize obrazovky
    window.addEventListener('resize', () => {
      const popup = document.getElementById('popup');
      if (popup.style.display === 'block') {
        const ax = parseFloat(popup.dataset.anchorX);
        const ay = parseFloat(popup.dataset.anchorY);
        if (!isNaN(ax) && !isNaN(ay)) {
          positionPopup(popup, ax, ay);
        }
      }
    });
  </script>

  <!-- ====== ZNAÄŒKOVACÃ MÃ“D â€“ panel + toggle + skript ====== -->
  <button class="marker-toggle" id="markerToggle" type="button">ZnaÄit</button>

  <div class="marker-panel" id="markerPanel">
    <label><input type="checkbox" id="markMode"> ZnaÄkovacÃ­ mÃ³d</label>
    <label>
      Typ ikony:
      <select id="iconType">
        <option value="light" selected>SvÄ›tlo (icon-gold, L4)</option>
        <option value="ac">Klimatizace (icon-blue, K)</option>
        <option value="socket">ZÃ¡suvka (icon-gray, Z)</option>
        <option value="switch">VypÃ­naÄ (icon-green, V)</option>
        <option value="speaker">Reproduktor (icon-red, R)</option>
        <option value="bell">Zvonek (icon-red, zv)</option>
        <option value="camera">Kamera (icon-pink, K)</option>
        <option value="kafe">KÃ¡vovar (icon-brown, KÃ¡v)</option>
        <option value="custom">VlastnÃ­ (icon, text)</option>
      </select>
    </label>
    <label id="customTextWrap" style="display:none; margin-top:6px;">
      Text v ikonÄ›: <input type="text" id="iconText" value="X" style="width:80px;">
    </label>
    <small>Klikni do obrÃ¡zku â†’ snippet se zkopÃ­ruje do schrÃ¡nky.</small>
  </div>

  <div class="copy-toast" id="copyToast">ZkopÃ­rovÃ¡no do schrÃ¡nky âœ‚ï¸</div>

  <script>
    (function(){
      const markMode = document.getElementById('markMode');
      const iconTypeSel = document.getElementById('iconType');
      const iconTextInput = document.getElementById('iconText');
      const customWrap = document.getElementById('customTextWrap');
      const toast = document.getElementById('copyToast');
      const panel = document.getElementById('markerPanel');
      const toggleBtn = document.getElementById('markerToggle');

      function syncUI(){
        if (markMode.checked) {
          panel.style.display = 'block';
          toggleBtn.classList.add('on');
          toggleBtn.textContent = 'ZnaÄit (zapnuto)';
        } else {
          panel.style.display = 'none';
          toggleBtn.classList.remove('on');
          toggleBtn.textContent = 'ZnaÄit';
        }
      }
      toggleBtn.addEventListener('click', () => {
        markMode.checked = !markMode.checked;
        syncUI();
      });
      markMode.addEventListener('change', syncUI);
      markMode.checked = false;
      syncUI();

      iconTypeSel.addEventListener('change', () => {
        customWrap.style.display = iconTypeSel.value === 'custom' ? 'block' : 'none';
      });

      const TYPE_MAP = {
        light:  { cls: 'icon icon-gold',   text: 'L4',  title: 'SvÄ›tlo' },
        ac:     { cls: 'icon icon-blue',   text: 'K',   title: 'Klimatizace' },
        socket: { cls: 'icon icon-gray',   text: 'Z',   title: 'ZÃ¡suvka' },
        switch: { cls: 'icon icon-green',  text: 'V',   title: 'VypÃ­naÄ' },
        speaker:{ cls: 'icon icon-red',    text: 'R',   title: 'Reproduktor' },
        bell:   { cls: 'icon icon-red',    text: 'zv',  title: 'Zvonek' },
        camera: { cls: 'icon icon-pink',   text: 'K',   title: 'Kamera' },
        kafe:   { cls: 'icon icon-brown',  text: 'KÃ¡v', title: 'KÃ¡vovar' },
        custom: { cls: 'icon',             text: 'X',   title: 'Objekt' },
      };

      document.querySelectorAll('.floorplan').forEach(fp => {
        const img = fp.querySelector('img');
        if (!img) return;

        fp.addEventListener('click', (e) => {
          if (!markMode.checked) return;

          const rect = fp.getBoundingClientRect();
          const xPx = e.clientX - rect.left;
          const yPx = e.clientY - rect.top;
          const xPct = (xPx / rect.width) * 100;
          const yPct = (yPx / rect.height) * 100;

          const typeKey = iconTypeSel.value;
          const conf = TYPE_MAP[typeKey] || TYPE_MAP.custom;

          const iconText = (typeKey === 'custom' ? (iconTextInput.value || 'X') : conf.text);
          const title = conf.title + ' â€“ doplÅˆ popis';
          const content = 'VÃ½Å¡ka: â€¦ cm';

          const snippet =
`<div class="${conf.cls}" style="top: ${yPct.toFixed(1)}%; left: ${xPct.toFixed(1)}%;" onclick="openPopup('${title}','${content}', this)">${iconText}</div>`;

          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(snippet).then(showToast, showToast);
          } else {
            const ta = document.createElement('textarea');
            ta.value = snippet;
            document.body.appendChild(ta);
            ta.select();
            try { document.execCommand('copy'); } catch(e){}
            document.body.removeChild(ta);
            showToast();
          }

          const ghost = document.createElement('div');
          ghost.className = 'marker-ghost';
          ghost.style.top = yPct + '%';
          ghost.style.left = xPct + '%';
          fp.appendChild(ghost);
          setTimeout(() => ghost.remove(), 900);
        }, false);
      });

      function showToast(){
        toast.classList.add('show');
        setTimeout(()=>toast.classList.remove('show'), 900);
      }
    })();
  </script>
  <!-- ====== /ZNAÄŒKOVACÃ MÃ“D ====== -->

  <!-- PWA: registrace service workeru -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .catch(err => console.error('SW registrace selhala:', err));
      });
    }
  </script>
</body>
</html>
